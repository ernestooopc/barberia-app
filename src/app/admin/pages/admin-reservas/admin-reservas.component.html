<div class="container py-4">
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Panel de Reservas (Admin)</h5>
    </div>

    <div class="card-body p-0">
      <div *ngIf="error" class="alert alert-danger m-3">
        {{ error }}
      </div>

      <div class="table-responsive">
        <table class="table table-hover table-striped mb-0">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Servicio</th>
              <th>Fecha / Hora</th>
              <th>Estado</th>
              <th class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody *ngIf="reservas.length; else noData">
            <tr *ngFor="let r of reservas">
              <td>{{ r.id }}</td>
              <td>{{ r.usuario.nombre }}</td>
              <td>{{ r.tipoCorte.nombre }}</td>
              <td>{{ r.fechaHora | date:'dd/MM/yyyy HH:mm' }}</td>
              <td>
                <span
                  class="badge"
                  [ngClass]="{
                    'bg-warning text-dark': r.estado==='PENDIENTE',
                    'bg-danger': r.estado==='CANCELADA',
                    'bg-success': r.estado==='COMPLETADA'
                  }"
                >
                  {{ r.estado }}
                </span>
              </td>
              <td class="text-center">
                <button
                  class="btn btn-sm btn-outline-danger me-1"
                  (click)="setStatus(r, 'CANCELADA')"
                  [disabled]="r.estado==='CANCELADA'"
                  title="Cancelar"
                >
                CANCELAR
                  <i class="bi bi-x-circle"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-success me-1"
                  (click)="setStatus(r, 'COMPLETADA')"
                  [disabled]="r.estado==='COMPLETADA'"
                  title="Completar"
                >
                COMPLETADA
                  <i class="bi bi-check-circle"></i>
                </button>
                <button
                  class="btn btn-sm btn-outline-secondary"
                  (click)="setStatus(r, 'PENDIENTE')"
                  [disabled]="r.estado==='PENDIENTE'"
                  title="Marcar como pendiente"
                >
                PENDIENTE
                  <i class="bi bi-arrow-counterclockwise"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #noData>
        <div class="p-4 text-center text-muted">
          No hay reservas registradas.
        </div>
      </ng-template>
    </div>
  </div>
</div>
